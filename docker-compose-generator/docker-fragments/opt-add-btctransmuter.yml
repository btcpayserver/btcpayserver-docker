version: "3"

services:
  btctransmuter:
    restart: unless-stopped
    image: kukks/btctransmuter:0.0.2
    environment:
      NBXplorer_Cryptos: ${BTCTRANSMUTER_CRYPTOS}
      NBXplorer_Uri: http://nbxplorer:32838/
      NBXplorer_NetworkType: ${NBITCOIN_NETWORK:-regtest}
      LETSENCRYPT_HOST: ${BTCTRANSMUTER_HOST}
      LETSENCRYPT_EMAIL: ${LETSENCRYPT_EMAIL:-<no value>}
      VIRTUAL_HOST: ${BTCTRANSMUTER_HOST}
      VIRTUAL_PORT: 5000
      VIRTUAL_SERVICE_NAME: "btctransmuter"
    expose:
      - "5000"
    links: 
      - nbxplorer
  btcpayserver:
    environment:
      BTCPAY_EXTERNALSERVICES: "BTC Transmuter:${BTCPAY_PROTOCOL:-https}://${BTCTRANSMUTER_HOST};"
